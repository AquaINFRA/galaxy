<tool id="plotInterpolationMap" name="Plot interpolation map" version="0.1.0">
    <description> based on a .csv file.</description>
    <requirements>
        <requirement type="package" version="4.1.2">R</requirement>
        <requirement type="package" version="1.2.0">getopt</requirement>
        <requirement type="package" version="1.0.14">sf</requirement>
        <requirement type="package" version="3.3.3">tmap</requirement>
        <requirement type="package" version="1.1.3">RColorBrewer</requirement>
        <requirement type="package" version="3.6.23">raster</requirement>
        <requirement type="package" version="2.1.1">gstat</requirement>
    </requirements>
    <stdio>
        <exit_code range="1:" />
    </stdio>
    <command><![CDATA[
        Rscript $__tool_directory__/plotInterpolationMap.R --inputData1 $inputFile1 --inputData2 $inputFile2 --inputData3 $inputFile3 --idw_power $idw_power --test_case $testCase --outputData $output
    ]]></command>
    <inputs>
        <param type="data" format="csv" name="inputFile1" label="Select the .csv file including the observations."/>
        <param type="data" format="geojson" name="inputFile2" label="Select the .geojson containing the study area."/>
        <param type="data" format="geojson" name="inputFile3" label="Select the .geojson containing the spatial points data frame."/>
        <param type="select" name="testCase" label="Should a seed be set?">
            <option value="false">No</option>
            <option value="true">Yes</option>
        </param>
        <param value="1" min="0" max="3" type="float" name="idw_power" label="Select the interpolation power of the IDW method."/>
    </inputs>
    <outputs>
        <data name="output" format="png" />
    </outputs>
    <tests>
        <!-- Run test with: planemo test plotInterpolationMap.xml - -test_output=plotInterpolationMap.html -->
        <test>
            <param name="inputFile1" value="plotInterpolationMap_test_input1.csv"/>
            <param name="inputFile2" value="plotInterpolationMap_test_input2.geojson"/>
            <param name="inputFile3" value="plotInterpolationMap_test_input3.geojson"/>
            <param name="idw_power" value="2"/>
            <param name="testCase" value="true"/>
            <output name="output" file="plotInterpolationMap_test_output.png"/>
        </test>
    </tests>
    <help><![CDATA[
        The plot is stored as a .png file. 
    ]]></help>
    <citations>
        <citation type="bibtex">
            @Manual{getopt,
                title = {getopt: C-Like 'getopt' Behavior},
                author = {Trevor L Davis and Allen Day},
                year = {2019},
                note = {R package version 1.20.3},
                url = {https://CRAN.R-project.org/package=getopt},
            }
        </citation>
        <citation type="bibtex">
            @Article{sf,
                author = {Edzer Pebesma},
                title = {{Simple Features for R: Standardized Support for Spatial Vector Data}},
                year = {2018},
                journal = {{The R Journal}},
                doi = {10.32614/RJ-2018-009},
                url = {https://doi.org/10.32614/RJ-2018-009},
                pages = {439--446},
                volume = {10},
                number = {1},
            }
        </citation>
        <citation type="bibtex">
            @Article{tmap,
                title = {{tmap}: Thematic Maps in {R}},
                author = {Martijn Tennekes},
                journal = {Journal of Statistical Software},
                year = {2018},
                volume = {84},
                number = {6},
                pages = {1--39},
                doi = {10.18637/jss.v084.i06},
            }
        </citation>
        <citation type="bibtex">
            @Manual{rcb,
                title = {RColorBrewer: ColorBrewer Palettes},
                author = {Erich Neuwirth},
                year = {2022},
                note = {R package version 1.1-3},
                url = {https://CRAN.R-project.org/package=RColorBrewer},
            }
        </citation>
        <citation type="bibtex">
            @Manual{raster,
                title = {raster: Geographic Data Analysis and Modeling},
                author = {Robert J. Hijmans},
                year = {2023},
                note = {R package version 3.6-23},
                url = {https://CRAN.R-project.org/package=raster},
            }
        </citation>
        <citation type="bibtex">
            @Article{gstat,
                title = {Spatio-Temporal Interpolation using gstat},
                author = {Benedikt Gr√§ler and Edzer Pebesma and Gerard Heuvelink},
                year = {2016},
                journal = {The R Journal},
                volume = {8},
                issue = {1},
                pages = {204-218},
                url = {https://journal.r-project.org/archive/2016/RJ-2016-014/index.html},
            }
        </citation>
    </citations>
</tool>