<tool id="filterData" name="Filter dataset" version="0.1.0">
    <description> creates a subset of the data based on the parameters "quality level", "accuracy", and "processing stage".</description>
    <requirements>
        <requirement type="package" version="4.1.2">R</requirement>
        <requirement type="package" version="1.2.0">getopt</requirement>
        <requirement type="package" version="1.1.2">dplyr</requirement>
    </requirements>
    <stdio>
        <exit_code range="1:" />
    </stdio>
    <command><![CDATA[
        Rscript $__tool_directory__/filterData.R --inputData $inputFile --checked $checked --accuracy $accuracy --processing $processing --outputData $output
    ]]></command>
    <inputs>
        <param type="data" format="csv" name="inputFile" label="Observations as csv"/>
        <param type="select" name="checked" label="Show only quality checked observations?">
            <option value="false">No</option>
            <option value="true">Yes</option>
        </param>
        <param type="select" name="processing" label="Which processing stage should be included?">
            <option value="both">Adjusted and raw</option>
            <option value="adjusted">Adjusted</option>
            <option value="raw">Raw</option>
        </param>
        <param value="0.21" min="0.00" max="0.51" type="float" name="accuracy" label="Show only observations with an accuracy smaller than..."/>
    </inputs>
    <outputs>
        <data name="output" format="csv" />
    </outputs>
    <tests>
        <test>
            <param name="inputFile" value="filterData_testdata_input.csv"/>
            <param name="checked" value="true"/>
            <param name="processing" value="adjusted"/>
            <param name="accuracy" value="0.1"/>
            <output name="output" file="filterData_testdata_output.csv" />
        </test>
    </tests>
    <help><![CDATA[
        Routes can be calculated for coordinates withing the boundaries of the provided datasets.
    ]]></help>
    <citations>
        <citation type="bibtex">
            @Manual{dplyr,
                title = {dplyr: A Grammar of Data Manipulation},
                author = {Hadley Wickham and Romain François and Lionel Henry and Kirill Müller and Davis Vaughan},
                year = {2023},
                note = {R package version 1.1.2},
                url = {https://CRAN.R-project.org/package=dplyr},
            }
        </citation>
        <citation type="bibtex">
            @Manual{getopt,
                title = {getopt: C-Like 'getopt' Behavior},
                author = {Trevor L Davis and Allen Day},
                year = {2019},
                note = {R package version 1.20.3},
                url = {https://CRAN.R-project.org/package=getopt},
            }
        </citation>
    </citations>
</tool>