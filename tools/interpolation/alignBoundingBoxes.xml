<tool id="interpolation_align_bounding_boxes" name="Align bounding boxes" version="1.0">
    <description> of two spatial dataframes.</description>
    <requirements>
        <requirement type="package" version="4.1.2">R</requirement>
        <requirement type="package" version="1.2.0">getopt</requirement>
        <requirement type="package" version="1.0.14">sf</requirement>
    </requirements>
    <stdio>
        <exit_code range="1:" level="fatal" description="Error occurred. Please check Tool: Align bounding boxes"/>
    </stdio>
    <command><![CDATA[
        Rscript $__tool_directory__/alignBoundingBoxes.R --spatialObject1 $spatial_object_1 --spatialObject2 $spatial_object_2 --outputData $output
    ]]></command>
    <inputs>
        <param type="data" format="geojson" name="spatial_object_1" label="Select file that should be aligned"/>
        <param type="data" format="geojson" name="spatial_object_2" label="Select file upon which the alignment should be based"/>
    </inputs>
    <outputs>
        <data name="output" format="geojson" />
    </outputs>
    <tests>
        <!-- Run test with: planemo test alignBoundingBoxes.xml - -test_output=alignBoundingBoxes_test_output.html -->
        <test>
            <param name="spatial_object_1" value="alignBoundingBoxes_test_input1.geojson"/>
            <param name="spatial_object_2" value="alignBoundingBoxes_test_input2.geojson"/>
            <!-- lines_diff is needed because Galaxy changes the name property of the geopjson dynamically.-->
            <output name="output" file="alignBoundingBoxes_test_output.geojson" lines_diff="2"/>
        </test> 
    </tests>
    <help><![CDATA[
        The bounding box of the second dataset is taken to overwrite the bounding box of the first dataset. As a result, the first dataset will fit to the second one. 
    ]]></help>
    <citations>
        <citation type="bibtex">
            @Manual{getopt,
                title = {getopt: C-Like 'getopt' Behavior},
                author = {Trevor L Davis and Allen Day},
                year = {2019},
                note = {R package version 1.20.3},
                url = {https://CRAN.R-project.org/package=getopt},
            }
        </citation>
        <citation type="bibtex">
            @Article{sf,
                author = {Edzer Pebesma},
                title = {{Simple Features for R: Standardized Support for Spatial Vector Data}},
                year = {2018},
                journal = {{The R Journal}},
                doi = {10.32614/RJ-2018-009},
                url = {https://doi.org/10.32614/RJ-2018-009},
                pages = {439--446},
                volume = {10},
                number = {1},
            }
        </citation>
    </citations>
</tool>