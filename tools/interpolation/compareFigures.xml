<tool id="interpolation_compare_figures" name="Compare figures" version="1.0">
    <description> creates a diff image by comparing two images.</description>
    <requirements>
        <requirement type="package" version="4.1.2">R</requirement>
        <requirement type="package" version="1.2.0">getopt</requirement>
        <requirement type="package" version="0.45.2">imager</requirement>
        <requirement type="package" version="2.0.3">magrittr</requirement>
    </requirements>
    <stdio>
        <exit_code range="1:" level="fatal" description="Error occurred. Please check Tool: Compare figures"/>
    </stdio>
    <command><![CDATA[
        Rscript $__tool_directory__/compareFigures.R --figure1 $figure_1 --figure2 $figure_2 --output $output
    ]]></command>
    <inputs>
        <param type="data" format="png" name="figure_1" label="Select a figure stored as .png."/>
        <param type="data" format="png" name="figure_2" label="Select a figure stored as .png."/>
    </inputs>
    <outputs>
        <data name="output" format="png" />
    </outputs>
    <tests>
        <!-- Run test with: planemo test compareFigures.xml - -test_output=compareFigures.html -->
        <test>
            <param name="figure_1" value="compareFigures_test_input1.png"/>
            <param name="figure_1" value="compareFigures_test_input2.png"/>
            <output name="output" file="compareFigures_test_output.png"/>
        </test>
    </tests>
    <help><![CDATA[
        The diff plot is stored as a .png file. 
    ]]></help>
    <citations>
        <citation type="bibtex">
            @Manual{getopt,
                title = {getopt: C-Like 'getopt' Behavior},
                author = {Trevor L Davis and Allen Day},
                year = {2019},
                note = {R package version 1.20.3},
                url = {https://CRAN.R-project.org/package=getopt},
            }
        </citation>
        <citation type="bibtex">
            @Manual{imgr,
                title = {imager: Image Processing Library Based on 'CImg'},
                author = {Simon Barthelme},
                year = {2023},
                note = {R package version 0.45.2},
                url = {https://CRAN.R-project.org/package=imager},
            }
        </citation>
    </citations>
</tool>